<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/style.css" />
    <title>Url Shortener</title>
  </head>
  <body class="mb-3">
    <nav class="navbar navbar-dark mb-3">
      <div class="container-fluid justify-content-center ">
        <span class="navbar-brand mb-0 h1 fs-1">Url Shortener</span>
      </div>
    </nav>
    <div class="shadow p-3 bg-body rounded container mb-3">
      <form method="POST" action="/newUrl">
        <label for="originalUrl" class="form-label">Enter a long URL</label>
        <input
          type="url"
          name="originalUrl"
          id="originalUrl"
          class="form-control mb-2"
          placeholder="Enter the link here"
          required
        />
        <button type="submit" class="btn btn-primary w-100">Shorten URL</button>
      </form>
    </div>
    <% if(allUrls && allUrls.length){ %> 
    <div class="shadow p-3 bg-body rounded container">
      <% allUrls.slice(0).reverse().map((url, index)=>{%>
      <!-- <div class="d-flex justify-content-between align-items-center "> -->
      <div class="row align-items-center justify-content-center gy-2">
        <a
          href="<%= url.originalUrl %>"
          target="_blank"
          rel="noopener noreferrer"
          class="originalUrlLink col-12 col-lg-6">
          <%= url.originalUrl %>
        </a>
        <!-- <div class="w-100"></div> -->

        <!-- <div class="d-flex flex-row justify-content-between w-50 align-items-center "> -->
        <div class="col-12 col-lg-6">
          <div class="row align-items-center gy-2">
        <a
          href="/<%= url.shortUrl %>"
          target="_blank"
          rel="noopener noreferrer"
          class="shortUrl col-8 col-lg-6">
          <%= process.env.URL+url.shortUrl %>
        </a>
        <div class="col-4 col-lg-3">Clicks <span class="badge bg-secondary"><%= url.clicks%></span></div>
        <button id="<%= process.env.URL+url.shortUrl %>" onclick="copyUrlToClipboard(this)" class="copyBtn btn col-12 col-lg-3">Copy URL</button>
          </div>
         
        </div>
      </div>
        <% if(index<allUrls.length-1){ %> 
          <hr class="mb-3"/>
        <% } %> 
      <% })%>
      
    </div>
    <% }%>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script src="/js/copyUrl.js"></script>
  </body>
</html>
